const SliderClassName="slider",SliderLineClassName="slider-line",SliderSlideClassName="slider-slide",SliderDotsClassName="slider-dot",SliderDotClassName="dot",SliderDotsActiveClassName="dot-active",swiper=document.querySelector(".swiper");class Slider{constructor(t,e={}){this.containerNode=t,this.size=t.childElementCount,this.currentSlide=0,this.currentSlideWasChange=!1,this.settings={margin:e.margin||0},this.manageHTML=this.manageHTML.bind(this),this.setParrameters=this.setParrameters.bind(this),this.setEvents=this.setEvents.bind(this),this.resizeSlider=this.resizeSlider.bind(this),this.startDrag=this.startDrag.bind(this),this.stopDrag=this.stopDrag.bind(this),this.dragging=this.dragging.bind(this),this.startDragPage=this.dragging.bind(this),this.setStylePosition=this.setStylePosition.bind(this),this.setStylePositionReset=this.setStylePositionReset.bind(this),this.clickDots=this.clickDots.bind(this),this.changeCurrentSlide=this.changeCurrentSlide.bind(this),this.changeActiveDotClass=this.changeActiveDotClass.bind(this),this.manageHTML(),this.setParrameters(),this.setEvents()}manageHTML(){this.containerNode.classList.add("slider"),this.containerNode.innerHTML=`
			<div class="${SliderLineClassName}">
				${this.containerNode.innerHTML}
			</div>
			
			<div class="${SliderDotsClassName}"></div>
		`,this.lineNode=this.containerNode.querySelector(`.${SliderLineClassName}`),this.dotsNode=this.containerNode.querySelector(`.${SliderDotsClassName}`),this.slideNodes=Array.from(this.lineNode.children).map(t=>wrpapElementByDiv({element:t,className:"slider-slide"})),this.dotsNode.innerHTML=Array.from(Array(this.size).keys()).map(t=>`<button class="dot ${t===this.currentSlide?SliderDotsActiveClassName:""}"></button>`).join(""),this.dotNodes=this.dotsNode.querySelectorAll(".dot")}setParrameters(){let t=this.containerNode.getBoundingClientRect();this.width=t.width,this.maximumX=-(this.size-1)*(this.width+this.settings.margin),this.x=-this.currentSlide*(this.width+this.settings.margin),this.lineNode.style.width=`${this.size*(this.width+this.settings.margin)}px`,this.setStylePosition(),Array.from(this.slideNodes).forEach(t=>t.style.width=`${this.width}px`),Array.from(this.slideNodes).forEach(t=>t.style.marginRight=`${this.settings.margin}px`),1===this.size&&(this.dotsNode.style.visibility="hidden")}setEvents(){this.debouncedResizeSlider=debounce(this.resizeSlider),window.addEventListener("resize",this.debouncedResizeSlider),this.lineNode.addEventListener("pointerdown",this.startDrag),window.addEventListener("pointerup",this.stopDrag),window.addEventListener("pointercancel",this.stopDrag),this.dotsNode.addEventListener("click",this.clickDots)}destroyEvents(){window.removeEventListener("resize",this.debouncedResizeSlider),this.lineNode.removeEventListener("pointerdown",this.startDrag),window.removeEventListener("pointerup",this.stopDrag),window.removeEventListener("pointercancel",this.stopDrag),this.dotsNode.removeEventListener("click",this.clickDots)}resizeSlider(){this.setParrameters()}startDrag(t){this.currentSlideWasChange=!1,this.clickX=t.pageX,this.clickY=t.pageY,this.startX=this.x,this.resetStyleTransition(),window.addEventListener("pointermove",this.dragging)}stopDrag(){window.removeEventListener("pointermove",this.dragging),this.x=-this.currentSlide*(this.width+this.settings.margin),this.setStylePosition(),this.setStyleTransition(),this.changeCurrentSlide()}startDragPage(){}dragging(t){this.dragX=t.pageX,this.dragY=t.pageY;let e=this.dragY-this.clickY,i=this.dragX-this.clickX,s=i/5;this.x=Math.max(Math.min(this.startX+i,s),this.maximumX+s),this.setStylePosition(),Math.abs(e)>Math.abs(i)&&(this.stopDrag(),e>0&&window.scrollBy(0,-this.dragY),e<0&&window.scrollBy(0,this.dragY)),i>80&&i>0&&!this.currentSlideWasChange&&this.currentSlide>0&&(this.currentSlideWasChange=!0,this.currentSlide=this.currentSlide-1),i<-80&&i<0&&!this.currentSlideWasChange&&this.currentSlide<this.size-1&&(this.currentSlideWasChange=!0,this.currentSlide=this.currentSlide+1)}clickDots(t){let e=t.target.closest("button");if(!e)return;let i;for(let s=0;s<this.dotNodes.length;s++)if(this.dotNodes[s]===e){i=s;break}i!==this.currentSlide&&(this.currentSlide=i,this.changeCurrentSlide())}changeCurrentSlide(){this.x=-this.currentSlide*(this.width+this.settings.margin),this.setStylePosition(),this.setStyleTransition(),this.changeActiveDotClass()}changeActiveDotClass(){for(let t=0;t<this.dotNodes.length;t++)this.dotNodes[t].classList.remove(SliderDotsActiveClassName);this.dotNodes[this.currentSlide].classList.add(SliderDotsActiveClassName)}setStylePosition(){this.lineNode.style.transform=`translate3d(${this.x}px, 0, 0)`}setStylePositionReset(){this.lineNode.style.transform=`translate3d(${this.x-this.width*this.currentSlide}px, 0, 0)`}setStyleTransition(){this.lineNode.style.transition="all 0.25s ease 0s"}setStyleTransitionEnd(){this.lineNode.style.transition="all 0s ease 0s"}resetStyleTransition(){this.lineNode.style.transition="all 0s ease 0s"}}function wrpapElementByDiv({element:t,className:e}){let i=document.createElement("div");return i.classList.add(e),t.parentNode.insertBefore(i,t),i.appendChild(t),i}function debounce(t,e=100){let i;return function(s){clearTimeout(i),i=setTimeout(t,e,s)}}new Slider(document.getElementById("slider-one"),{margin:10});